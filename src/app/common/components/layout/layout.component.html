<div class="layout-wrapper">
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <div class="logo-container">
        <i class="bi bi-globe2 logo-icon"></i>
        <span class="logo-text">CampusOrbit</span>
      </div>
    </div>

    <div class="header-right">
      <div class="user-info">
        <div class="user-avatar">
          <i class="bi bi-person-circle"></i>
        </div>
        <div class="user-details">
          @if (loggedInUser()) {
            <div class="user-name">{{ loggedInUser()?.fullName }}</div>
            <div class="user-enrollment">{{ loggedInUser()?.enrollmentNumber }}</div>
          }
        </div>
      </div>
      <button class="btn btn-logout" (click)="userService.logout()">
        <i class="bi bi-box-arrow-right"></i>
        <span class="logout-text">Logout</span>
      </button>
    </div>
  </header>

  <!-- Main Content Area -->
  <div class="content-wrapper">
    <!-- Sidebar -->
    <nav class="sidebar"
         (mouseenter)="toggleSidebar(true)"
         (mouseleave)="toggleSidebar(false)"
         [class.sidebar-expanded]="sidebarExpanded()"
         [class.sidebar-collapsed]="!sidebarExpanded()">

      <ul class="sidebar-nav">
        @for (module of sidebarData(); track module.moduleId) {
          <li class="nav-module">
            <div class="module-header"
                 (click)="toggleModule(module.moduleId)"
                 [class.active]="activeModuleId() === module.moduleId">
              <div class="module-icon-wrapper">
                <i class="{{ module.cssIcon }} module-icon"></i>
                <span class="module-name"
                      [class.show]="sidebarExpanded()">
                  {{ module.displayName }}
                </span>
              </div>
              @if (sidebarExpanded()) {
                <i class="bi chevron-icon"
                   [class.bi-chevron-down]="activeModuleId() === module.moduleId"
                   [class.bi-chevron-right]="activeModuleId() !== module.moduleId"></i>
              }
            </div>

            @if (activeModuleId() === module.moduleId && sidebarExpanded()) {
              <ul class="module-routes">
                @for (route of module.routes; track route.path) {
                  <li class="route-item">
                    <a class="route-link" [routerLink]="route.path" routerLinkActive="active">
                      <i class="bi bi-circle-fill route-dot"></i>
                      <span class="route-name">{{ route.displayName }}</span>
                    </a>
                  </li>
                }
              </ul>
            }
          </li>
        }
      </ul>

      <!-- Sidebar Footer -->
      <!-- <div class="sidebar-footer">
        <div class="sidebar-footer-content">
          <i class="bi bi-info-circle"></i>
          @if (sidebarExpanded()) {
            <span class="footer-text">v1.0.0</span>
          }
        </div>
      </div> -->
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="content-inner">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>

  <!-- Footer -->
  <!-- <footer class="app-footer">
    <div class="footer-content">
      <span>&copy; 2025 Dhyey Sutariya</span>
      <span class="footer-separator">|</span>
      <span>CampusOrbit - Placement Management System</span>
    </div>
  </footer> -->
</div>
